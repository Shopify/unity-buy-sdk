namespace <%= namespace %>.SDK {
    using System;
    using System.Collections.Generic;
    using <%= namespace %>.GraphQL;

    public class DefaultQueriesCheckout {
        public void Create(MutationQuery query, List<CheckoutLineItemInput> lineItems) {
            query.checkoutCreate(
                buildQuery: checkoutCreate => checkoutCreate
                    .checkout(checkout => {
                        Checkout(checkout);
                        CheckoutLineItems(checkout);
                    })
                    .userErrors(userErrors => userErrors
                        .field()
                        .message()
                    ),
                input: new CheckoutCreateInput(
                    lineItems: lineItems
                )
            );
        }

        public void Poll(QueryRootQuery query, string checkoutId) {
            query.node(
                buildQuery: node => node
                    .onCheckout(checkout => Checkout(checkout)),
                id: checkoutId
            );
        }

        public void LineItemsAdd(MutationQuery query, string checkoutId, List<CheckoutLineItemInput> lineItems) {
            query.checkoutLineItemsAdd(
                buildQuery: lineItemAdd => lineItemAdd
                    .checkout(checkout => {
                        Checkout(checkout);
                        CheckoutLineItems(checkout);
                    })
                    .userErrors(userErrors => userErrors
                        .field()
                        .message()
                    ),
                checkoutId: checkoutId,
                lineItems: lineItems
            );
        }

        public void LineItemsRemove(MutationQuery query, string checkoutId, List<string> lineItemIds) {
            query.checkoutLineItemsRemove(
                buildQuery: lineItemRemove => lineItemRemove
                    .checkout(checkout => {
                        Checkout(checkout);
                        CheckoutLineItems(checkout);
                    })
                    .userErrors(userErrors => userErrors
                        .field()
                        .message()
                    ),
                checkoutId: checkoutId,
                lineItemIds: lineItemIds
            );
        }

        public void LineItemsUpdate(MutationQuery query, string checkoutId, List<CheckoutLineItemUpdateInput> lineItems) {
            query.checkoutLineItemsUpdate(
                buildQuery: lineItemUpdate => lineItemUpdate
                    .checkout(checkout => {
                        Checkout(checkout);
                        CheckoutLineItems(checkout);
                    })
                    .userErrors(userErrors => userErrors
                        .field()
                        .message()
                    ),
                checkoutId: checkoutId,
                lineItems: lineItems
            );
        }

        public void CheckoutLineItemsPage(QueryRootQuery query, string checkoutId, int first = 250, string after = null) {
            query.node(
                buildQuery: node => node.onCheckout(checkout => CheckoutLineItems(checkout, first, after)),
                id: checkoutId
            );
        }

        private CheckoutQuery Checkout(CheckoutQuery checkout) {
            return checkout
                .id()
                .webUrl()
                .ready();
        }

        private CheckoutQuery CheckoutLineItems(CheckoutQuery checkout, int first = 250, string after = null) {
            return checkout.lineItems(
                buildQuery: lineItems => lineItems
                    .edges(edge => edge
                        .node(node => node
                            .id()
                            .variant(variant => variant
                                .id()
                            )
                        )
                        .cursor()
                    )
                    .pageInfo(pageInfo => pageInfo
                        .hasNextPage()
                    ),
                first: first,
                after: after
            );
        }
    }
}
