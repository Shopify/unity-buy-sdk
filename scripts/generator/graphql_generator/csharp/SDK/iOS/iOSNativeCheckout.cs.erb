#if UNITY_IOS
namespace <%= namespace %>.SDK.iOS {
    using System;
    using System.Collections;
    using System.Collections.Generic;
    using System.Runtime.InteropServices;
    using <%= namespace %>.SDK;

    partial class iOSNativeCheckout : INativeCheckout {
        [DllImport ("__Internal")]
        private static extern bool _CanCheckoutWithApplePay();

        [DllImport ("__Internal")]
        private static extern bool _CanShowApplePaySetup();

        [DllImport ("__Internal")]
        private static extern void _ShowApplePaySetup();

        [DllImport ("__Internal")]
        private static extern bool _CreateApplePaySession(string merchantID, string countryCode, string currencyCode, string unityDelegateObjectName, string serializedSummaryItems, string serializedShippingMethods, bool requiringShipping);

        [DllImport ("__Internal")]
        private static extern void _PresentApplePayAuthorization();

        private Cart CurrentCart;

        public iOSNativeCheckout(Cart cart) {
            CurrentCart = cart;
        }

        /// <summary>
        /// Checks if the device is capable of paying with Apple Pay
        /// </summary>
        /// <returns>True if the device is capable of paying with Apple Pay</returns>
        public bool CanCheckout() {
            return _CanCheckoutWithApplePay();
        }

        /// <summary>
        /// Checks if the device is capable of setting up Apple Pay
        /// </summary>
        /// <returns>True if the device is capable of setting up Apple Pay </returns>
        public bool CanShowPaymentSetup() {
            return _CanShowApplePaySetup();
        }

        /// <summary>
        /// Launches the iOS Wallet App, for the user to sign up with Apple Pay
        /// </summary>
        public void ShowPaymentSetup() {
            _ShowApplePaySetup();
        }

        /// <summary>
        /// Starts the process of making a payment through Apple Pay.
        /// </summary>
        /// <remarks>
        ///  Displays a payment interface to the user based on the contents of the Cart
        /// </remarks>
        /// <param name="key">Merchant ID for Apple Pay from the Apple Developer Portal</param>
        /// <param name="success">Delegate method that will be notified upon a successful payment</param>
        /// <param name="failure">Delegate method that will be notified upon a failure during the checkout process</param>
        /// <param name="cancelled">Delegate method that will be notified upon a cancellation during the checkout process</param>
        public void Checkout(string key, CheckoutSuccessCallback success, CheckoutFailureCallback failure, CheckoutCancelCallback cancelled) {
            // TODO
        }
    }
}
#endif
