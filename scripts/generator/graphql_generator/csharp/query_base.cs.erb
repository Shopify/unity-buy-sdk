namespace <%= namespace %> {
    using System;
    using System.Text;
    using System.Collections;
    using System.Collections.Specialized;

    public class QueryBase {
      protected StringBuilder query;
      private bool HasFields = false;


      protected void StartField(string fieldName) {
        if (HasFields) {
          query.Append(",");
        }

        query.Append(fieldName);
        HasFields = true;
      }

      protected void StartInlineFragment(string inlineFragmentOn) {
        query.AppendFormat("... on {0} {{", inlineFragmentOn);

        // resetting HasFields as the inlineFragment has no fields yet
        HasFields = false;
      }

      protected void StopInlineFragment() {
        query.Append("}");

        // resetting HasFields as we're hopping out of the inline fragment
        HasFields = false;
      }
    }
}
