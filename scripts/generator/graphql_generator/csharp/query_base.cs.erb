namespace <%= namespace %> {
    using System;
    using System.Text;
    using System.Collections;
    using System.Collections.Specialized;

    public class QueryBase {
      protected StringBuilder query;
      private bool hasFields = false;


      protected void StartField(string fieldName) {
        if (hasFields) {
          query.Append(",");
        }

        query.Append(fieldName);
        hasFields = true;
      }

      protected void StartInlineFragment(string inlineFragmentOn) {
        query.AppendFormat("... on {0} {{", inlineFragmentOn);

        // resetting hasFields as the inlineFragment has no fields yet
        hasFields = false;
      }

      protected void StopInlineFragment() {
        query.Append("}");

        // resetting hasFields as we're hopping out of the inline fragment
        hasFields = false;
      }
    }
}
